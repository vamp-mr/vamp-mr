@PACKAGE_INIT@

include(CMakeFindDependencyMacro)

# Find required dependencies
find_dependency(Eigen3 REQUIRED)

# Bring in bundled interface targets if they were installed alongside VAMP
set(_vamp_libdir "@CMAKE_INSTALL_LIBDIR@")
set(_vamp_prefix "${PACKAGE_PREFIX_DIR}/${_vamp_libdir}/cmake")

set(_vamp_nigh_targets "${_vamp_prefix}/nigh/nighTargets.cmake")
if(EXISTS "${_vamp_nigh_targets}" AND NOT TARGET nigh::nigh)
    include("${_vamp_nigh_targets}")
endif()

set(_vamp_pdqsort_targets "${_vamp_prefix}/pdqsort/pdqsortTargets.cmake")
if(EXISTS "${_vamp_pdqsort_targets}" AND NOT TARGET pdqsort::pdqsort)
    include("${_vamp_pdqsort_targets}")
endif()

unset(_vamp_nigh_targets)
unset(_vamp_pdqsort_targets)
unset(_vamp_prefix)
unset(_vamp_libdir)

# Include the exported targets
include("${CMAKE_CURRENT_LIST_DIR}/vamp_cppTargets.cmake")

# Ensure the canonical target exists even if the export only provides vamp::vamp_cpp
if(NOT TARGET vamp::vamp)
    if(TARGET vamp::vamp_cpp)
        add_library(vamp::vamp INTERFACE IMPORTED)
        target_link_libraries(vamp::vamp INTERFACE vamp::vamp_cpp)
    else()
        message(FATAL_ERROR "Expected target vamp::vamp_cpp not found after including export set")
    endif()
endif()

# Provide legacy target names for downstream projects
if(NOT TARGET vamp_cpp)
    add_library(vamp_cpp INTERFACE IMPORTED)
    target_link_libraries(vamp_cpp INTERFACE vamp::vamp)
endif()

# Set success
set(vamp_FOUND TRUE)

check_required_components(vamp)
